{% extends 'base.html' %}

{% block content %}
<form action="/movie/modify/{{movieInfo.movie_id}}" method="POST" enctype="multipart/form-data"
      onsubmit="return validateForm()">
    {% csrf_token %}
    <!-- Content wrapper -->
    <div class="content-wrapper">
        <!-- Content -->

        <div class="container-xxl flex-grow-1 container-p-y">

            <h4 class="fw-bold py-3 mb-4" style="display: inline-block;"> Movie Modify</h4>
            {% if user.is_superuser %}
            <div style="display: inline-block;float:right">

                <button type="submit" class="btn btn-warning">Modify</button>
                <button type="button" class="btn btn-danger"
                        onClick="location.href='/movie/delete/{{movieInfo.movie_id}}'">Delete
                </button>
                <button type="button" class="btn btn-primary"
                        onClick="location.href='/movie/info/{{movieInfo.movie_id}}'">Cancel
                </button>

            </div>
            {% endif %}
            <div class="row">
                <!-- Poster input -->
                <div class="col-md-6">
                    <div class="card">
                        <h5 class="card-header">Poster</h5>
                        <div class="card-body">
                            <div class="mb-3">
                                <input type="file" name="poster" id="poster" value="{{movieInfo.poster}}">
                            </div>

                        </div>
                    </div>
                </div>
                <!-- poster input -->

                <!-- information -->
                <div class="col-md-6">
                    <div class="card mb-4">

                        <h5 class="card-header">Information</h5>

                        <!-- 내용 -->
                        <div class="card-body" style="padding: 0px 24px 12px;">
                            <div>
                                <label for="title" class="form-label">Movie Title</label>
                                <input
                                        type="text"
                                        class="form-control"
                                        id="title"
                                        name="title"
                                        value="{{movieInfo.title}}"
                                        aria-describedby="defaultFormControlHelp"

                                />
                            </div>
                        </div>
                        <!-- 내용 -->
                        <!-- 내용 -->
                        <div class="card-body" style="padding: 0px 24px 12px;">
                            <div>
                                <label for="director" class="form-label">Movie Director</label>
                                <input
                                        type="text"
                                        class="form-control"
                                        id="director"
                                        name="director"
                                        value="{{movieInfo.director}}"
                                        aria-describedby="defaultFormControlHelp"

                                />
                            </div>
                        </div>
                        <!-- 내용 -->
                        <!-- 내용 -->
                        <div class="card-body" style="padding: 0px 24px 12px;">
                            <div>
                                <label for="actors" class="form-label">Movie Actor</label>
                                <input
                                        type="text"
                                        class="form-control"
                                        id="actors"
                                        name="actors"
                                        value="{{movieInfo.actors}}"
                                        aria-describedby="defaultFormControlHelp"

                                />
                            </div>
                        </div>
                        <!-- 내용 -->
                        <!-- 내용 -->
                        <div class="card-body" style="padding: 0px 24px 12px;">
                            <div>
                                <label for="genre" class="form-label">Movie Genre</label>
                                <input
                                        type="text"
                                        class="form-control"
                                        id="genre"
                                        name="genre"
                                        value="{{movieInfo.genre}}"
                                        aria-describedby="defaultFormControlHelp"

                                />
                            </div>
                        </div>
                        <!-- 내용 -->
                        <!-- 내용 -->
                        <div class="card-body" style="padding: 0px 24px 12px;">
                            <div>
                                <label for="openingday" class="form-label">Opening Day</label>
                                <input
                                        type="date"
                                        class="form-control"
                                        id="openingday"
                                        name="openingday"
                                        value="{{movieInfo.openingday|date:'Y-m-d'}}"
                                        aria-describedby="defaultFormControlHelp"

                                />
                            </div>
                        </div>
                        <!-- 내용 -->


                    </div>

                </div>
                <!-- information -->
                <!-- Trailer input -->
                <div class="col-md-6" style="margin-bottom:10px">
                    <div class="card">
                        <h5 class="card-header">Trailer</h5>
                        <div class="card-body" style="height:68.95px">
                            <div class="mb-3">
                                <input
                                        type="text"
                                        class="form-control"
                                        id="trailer"
                                        name="trailer"

                                        aria-describedby="defaultFormControlHelp"
                                        value="{{movieInfo.trailer}}"
                                />
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Trailer input -->
                <!-- Still Shot input -->
                <div class="col-md-6">
                    <div class="card">
                        <h5 class="card-header">Still Shot 1</h5>
                        <div class="card-body">
                            <div class="mb-3">
                                <input type="file" name="stillshot1" id="stillshot1" value="{{movieInfo.stillshot1}}">
                            </div>

                        </div>
                    </div>
                </div>
                <!-- Still Shot input -->
                <!-- Still Shot input -->
                <div class="col-md-6">
                    <div class="card">
                        <h5 class="card-header">Still Shot 2</h5>
                        <div class="card-body">
                            <div class="mb-3">
                                <input type="file" name="stillshot2" id="stillshot2" value="{{movieInfo.stillshot1}}">
                            </div>

                        </div>
                    </div>
                </div>
                <!-- Still Shot input -->
                <!-- Still Shot input -->
                <div class="col-md-6">
                    <div class="card">
                        <h5 class="card-header">Still Shot 3</h5>
                        <div class="card-body">
                            <div class="mb-3">
                                <input type="file" name="stillshot3" id="stillshot3" value="{{movieInfo.stillshot1}}">
                            </div>

                        </div>
                    </div>
                </div>
                <!-- Still Shot input -->


            </div>
        </div>
    </div>
    <!-- / Content -->
</form>

<!-- 값 미입력시 Modal -->
<div class="modal fade" id="basicModal" tabindex="-1" style="display: none;" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel1"><i class="bx bx-error bx-flashing bx-md me-5"></i></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col mb-3">
                        <h3> 모든 데이터를 입력해주세요!</h3>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

<!--     modal 용 스크립트   -->
<script>
                function validateForm() {
                  var inputField = document.getElementById("poster").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }
                  var inputField = document.getElementById("title").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }
                  var inputField = document.getElementById("director").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }
                  var inputField = document.getElementById("actors").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }
                  var inputField = document.getElementById("genre").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }
                  var inputField = document.getElementById("openingday").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }
                  var inputField = document.getElementById("stillshot1").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }
                  var inputField = document.getElementById("stillshot2").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }
                  var inputField = document.getElementById("stillshot2").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }
                  var inputField = document.getElementById("trailer").value;
                  if (inputField.trim() === "") {
                    var modal = new bootstrap.Modal(document.getElementById('basicModal'));
                    modal.show();
                    return false;
                  }

                  return true;
                }

</script>
{% endblock content %}